import{o as d,c as n,a,e as r,i as h,f as l,t as c,n as u,b}from"./index-05c69c0f.js";import{F as p,T as m,t as o}from"./tableMixin-9ab4a2a0.js";const g={class:"row row-cols-1"},f={class:"col col-md-9 mb-md-0"},y={class:"vstack gap-2"},_={class:"card shadow-sm"},v={class:"card-body"},D={class:"d-flex justify-content-between align-items-center"},w=a("div",{class:"fs-5"},[a("i",{class:"bi bi-tools"}),l(" Toolbar ")],-1),E=a("option",{value:"1"},"Bisa Dijual",-1),k=a("option",{value:"2"},"Tidak Bisa Dijual",-1),x=a("option",{value:"3"},"Semua",-1),S=[E,k,x],$={class:"hstack gap-2"},R=a("i",{class:"bi bi-arrow-clockwise"},null,-1),C={class:"card shadow-sm"},T={class:"card-body"},P={class:"d-flex justify-content-between align-items-center mb-2"},V={class:"fs-5"},W=a("i",{class:"bi bi-grid"},null,-1),j=a("span",{class:"visually-hidden"},"Loading...",-1),B=[j],F={ref:"table"},z={class:"col col-md-3"},A={class:"vstack gap-2"},N={data(){return{tabulator:null,tableData:[],xforms:{id:{label:"ID",type:"text",hidden:!0,value:""},nama:{label:"Nama",type:"textarea",hidden:!1,value:""},harga:{label:"Harga",type:"number",hidden:!1,value:""},kategori_id:{label:"Kategori",type:"select",hidden:!1,value:"",options:[{value:"1",text:"One"},{value:"2",text:"Two"},{value:"3",text:"Three"}]},status_id:{label:"Status",type:"select",hidden:!1,value:"",options:[{value:"1",text:"One"},{value:"2",text:"Two"},{value:"3",text:"Three"}]}},update:!1,tableMessage:"Loading...",tableLoaded:!1,url:"api/v1/produk/",displayWhich:1}},async mounted(){await this.getSelect(),this.tabulator=new m(this.$refs.table,{layout:"fitColumns",data:this.tableData,pagination:"local",paginationSize:10,paginationCounter:"rows",columns:[{title:"ID",field:"id",width:75},{title:"Name",field:"nama",hozAlign:"left",formatter:"textarea",width:300},{title:"Harga",field:"harga",hozAlign:"left"},{title:"Kategori",field:"nama_kategori",hozAlign:"left"},{title:"Action",width:100,download:!1,formatter:()=>`
                            <div class="d-flex justify-content-between align-items-center">
                                <button class="btn btn-sm btn-outline-primary" id="tb-edit"><i class="bi bi-pencil"></i></button>
                                <button class="btn btn-sm btn-outline-danger" id="tb-del"><i class="bi bi-trash"></i></button>
                            </div>
                        `,cellClick:(e,t)=>{e.target.id=="tb-edit"||e.target.parentElement.id=="tb-edit"?this.editData(t.getRow().getData()):(e.target.id=="tb-del"||e.target.parentElement.id=="tb-del")&&this.deleteData(t.getRow().getData().id)}}]}),this.getData(!0,{displayWhich:this.displayWhich})},methods:{async getSelect(){const e=await this.$http.get(this.$SERVER+"api/v1/kategori/"),t=await this.$http.get(this.$SERVER+"api/v1/status/");this.xforms.kategori_id.options=e.data.data.map(i=>({value:i.id,text:i.nama})),this.xforms.status_id.options=t.data.data.map(i=>({value:i.id,text:i.nama}))},async getDataProxy(){this.getData(!1,{displayWhich:this.displayWhich})},async modify(e){try{this.update?await this.$http.put(this.$SERVER+this.url+e.id+"/",e).then(t=>{this.$emit("callFoot",t.data.message,"bg-primary"),this.getDataProxy()}):(delete e.id,await this.$http.post(this.$SERVER+this.url,e).then(t=>{this.$emit("callFoot",t.data.message,"bg-primary"),this.getDataProxy()}))}catch(t){this.httpError(t)}},async deleteData(e){if(confirm("Are you sure?"))try{await this.$http.delete(this.$SERVER+this.url+e+"/",{data:{id:e}}).then(t=>{this.$emit("callFoot",t.data.message,"bg-primary"),this.getDataProxy()})}catch(t){this.httpError(t)}}},created(){this.httpError=o.httpError.bind(this),this.cancelEdit=o.cancelEdit.bind(this),this.editData=o.editData.bind(this),this.getData=o.getData.bind(this)}},O=Object.assign(N,{__name:"Produk",setup(e){return(t,i)=>(d(),n("div",g,[a("div",f,[a("div",y,[a("div",_,[a("div",v,[a("div",D,[w,r(a("select",{class:"form-select w-25","onUpdate:modelValue":i[0]||(i[0]=s=>t.displayWhich=s),onChange:i[1]||(i[1]=(...s)=>t.getDataProxy&&t.getDataProxy(...s))},S,544),[[h,t.displayWhich]]),a("div",$,[a("button",{class:"btn btn-primary btn-sm",onClick:i[2]||(i[2]=(...s)=>t.getDataProxy&&t.getDataProxy(...s))},[R,l(" Refresh ")])])])])]),a("div",C,[a("div",T,[a("div",P,[a("div",V,[W,l(" Data Table - "+c(t.displayWhich==1?"Bisa Dijual":t.displayWhich==2?"Tidak Bisa Dijual":"Semua"),1)]),a("div",{class:u(["spinner-border spinner-border-sm",{"d-none":t.tableLoaded}]),role:"status"},B,2)]),a("div",F,null,512)])])])]),a("div",z,[a("div",A,[b(p,{update:t.update,forms:t.xforms,onCancelChild:t.cancelEdit,onSubmitChild:t.modify},null,8,["update","forms","onCancelChild","onSubmitChild"])])])]))}});export{O as default};
